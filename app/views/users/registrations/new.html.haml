

.container.padded
  %h2
    = t('sign_up')

  - if resource.conflicting_invitation
    %p
      If you are
      = "#{resource.conflicting_invitation.email}, "
      and already started the business creation process,
      you can 
      = t('login_via_oauth')
      now to continue.
    %p
      = button_to t('login_via_oauth'), omniauth_authorize_path(:provider => :google_oauth2), :class => "btn"

  = simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :class => ["form-horizontal new-registration-form"] }) do |f|
    = devise_error_messages!

    = simple_fields_for @business do |bf|
      = bf.input :handle, :label => t('business.signup_handle')

    .control-group
      %label
      .controls

        The business handle is an alphanumeric string that will be
        used in web URLs here on the CRM.  It must consist only of
        lower case letters and numbers, and it should
        describe your business. Example 'rocketfoodies',
        'lisaandrewsspa', 'newenglandfishery', 'hipcorgishow'.

    = f.input :email, :required => true


    = f.input :use_google_oauth_registration, :as => :boolean, :label => "Use Google OAuth instead of password (recommended)"

    .custom-account-fields
      = f.input :first_name, :required => true

      = f.input :last_name, :required => true

      = f.input :password, :required => true

      = f.input :password_confirmation, :required => true

    .control-group
      %label
      .controls

        %p
          By continuing, you agree to the following Terms of Service:
          
          %ol.terms-of-service
            %li
              The software application you are about to use, MRivera
              CRM ("the app"), does not guarentee or promise feature
              correctness, product availability, or privacy of data. The
              app's owner has spent a significant amount of
              time taking measures to provide the aforementioned, but their
              provision is not guarenteed or promised.

            %li
              If you are paying a fee to use the app, you agree that you are paying
              for the opportunity that the app might work, and that
              it might benefit your business. No such benefit is guaranteed
              or promised.

            %li
              A fixed amount of support time per week is provided by
              the app's owner and this allocation of time is shared by
              all customers of the app. This allocation of time is
              typically a few hours. The support during this time is
              over email. Further support may be arranged to be
              provided over channels such as phone, video
              conference, or in-person visit, but such channels of
              support are to be negotiated over email between the
              customer and support provider appointed by the app's owner. Support is provided on
              a first come first serve basis, and if demand for
              support exceeds the couple of hours reserved for
              support time per week, then incoming support requests
              may go unanswered until the overflow of requests can
              be relieved. The app's owner acknowledges here that he risks
              losing you as a customer due to a possible failure to
              provide enough support hours per week.

            %li
              In no event shall the app's owner 
              be liable for any claim, damages or other
              liability, whether in an action of contract, tort or otherwise, arising from,
              out of or in connection with the app or the use or other dealings in
              the app.

            %li
              The app's owner may terminate your account and delete all data
              related to your account at any time. Written notification
              and a reason for such a termination and deletion is available upon request.

            .control-group
              %label{:for => "user_tos_agreement", :class => "checkbox"}
                = f.check_box :tos_agreement
                I have read and agree to the above Terms of Service.

        = f.submit t('sign_up'), :class => "btn"

    .already
      Already signed up? Visit 
      = "#{root_url}b/mybusinesshandle,"
      where mybusinesshandle is the handle you entered above when
      you signed up, and click the Login button in the top right to login.
